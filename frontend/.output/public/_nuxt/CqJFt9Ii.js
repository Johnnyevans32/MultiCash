import{_ as B}from"./CMp65wxY.js";import{_ as L}from"./B6uVtycy.js";import{_ as N}from"./CybuPCj8.js";import{_ as D}from"./CvmaWrLj.js";import{_ as I}from"./Czrw1GKb.js";import{e as $,D as _,_ as A,o as i,q as h,w as y,a as n,t as v,b as l,s as w,f as x,y as U,R as M,r as S,L as P,Q as T,c as f,F as k,v as R,m as j,n as q}from"./CDC5foPa.js";import{u as E}from"./CEedSPwL.js";import{u as F}from"./gh49L7wh.js";import{e as V}from"./BIfFRkhF.js";import"./CXSCOM6V.js";import"./CaIJJZHX.js";import"./DWg-mp3v.js";const z=$({props:{open:{type:Boolean},desc:{type:String},title:{type:String},loading:{type:Boolean,default:!1}},emits:["changeModalStatus","confirmModalAction"],setup(o,t){return{changeModalStatus:c=>{if(o.loading){_({type:"info",title:"you cant close modal while an action is in progress"});return}t.emit("changeModalStatus",c)},handleBtnClickAction:()=>t.emit("confirmModalAction")}}});function G(o,t,m,r,c,g){const s=D,a=I;return i(),h(a,{open:o.open,title:o.title,onChangeModalStatus:o.changeModalStatus},{content:y(()=>[n("p",null,v(o.desc),1)]),footer:y(()=>[l(s,{text:"Confirm",onBtnAction:o.handleBtnClickAction,"custom-css":"bg-red-600 w-full text-white",loading:o.loading},null,8,["onBtnAction","loading"]),l(s,{text:"Cancel",onBtnAction:t[0]||(t[0]=u=>o.changeModalStatus(!1)),"custom-css":"!bg-green-600 w-full text-white"})]),_:1},8,["open","title","onChangeModalStatus"])}const Q=A(z,[["render",G]]),W=$({setup(){var d,p;E({title:"Settings",ogTitle:"Settings"});const{user:o}=w(x()),{$api:t}=U(),{appThemeColor:m}=w(M()),{setAccessToken:r}=x(),{loading:c,withLoading:g}=F(),s=P(),a=S(!1),u=async()=>{r(null),await T("/signin"),_({type:"info",title:"you have been logged out"})};return{settingsItems:S([{logo:"at",action:`${s.public.appName} tag`,value:(d=o.value)!=null&&d.tag?`@${(p=o.value)==null?void 0:p.tag}`:"Not set",logoType:"icon",href:"/settings/tag"},{logo:"user",action:"Profile",value:"See your account information.",logoType:"icon",href:"/settings/profile"},{logo:"key",action:"Change your password",value:"Change your password at any time.",logoType:"icon",href:"/settings/password"},{logo:"shield-halved",action:"Guard",value:"Manage settings to guard your data.",logoType:"icon",href:"/settings/guard"},{logo:"bell",action:"Push Notification",value:"Enable push notification for real time updates.",logoType:"icon",href:"/settings/notification"},{logo:"fa-solid fa-palette",action:"Theme",value:m.value,logoType:"icon",href:"/settings/theme"},{logo:"fa-solid fa-bug",action:"Report an issue",value:"We will respond as soon as we can.",logoType:"icon",external:!0,href:V()},{logo:"right-from-bracket",action:"Logout",value:"You will be signed out of your account.",logoType:"icon",settingAction:u},{logo:"radiation",action:"Deactivate your account",value:"This will deactivate your account.",logoType:"icon",customCss:"bg-red-400",settingAction:()=>a.value=!0}]),user:o,deleteUser:async()=>{await g(async()=>{try{await t.userService.deleteUser();const{resetStore:e}=M();r(null),e(),_({type:"success",title:"user deactivated"}),await T("/signin")}finally{a.value=!1}})},confirmDeletionModal:a,loading:c}}}),Y={class:"border-b-[1px] border-base text-left py-5"},H={class:"flex flex-col gap-2"},J={class:"flex space-x-2 items-center"},K={class:"w-5"},O=["src"],X={class:"flex flex-col text-left"},Z={class:"font-bold"},oo={class:"text-sm line-clamp-1"};function eo(o,t,m,r,c,g){var d,p;const s=B,a=L,u=j("font-awesome-icon"),b=N,C=Q;return i(),f(k,null,[n("div",Y,[l(s,{mainPage:"Settings"})]),l(a,{image:((d=o.user)==null?void 0:d.profileImage)||`https://robohash.org/${(p=o.user)==null?void 0:p.email}`,alt:"avatar",type:"image","custom-css":"w-28 h-28 rounded-xl justify-self-center border-[1px] border-base bg-lightbase"},null,8,["image"]),n("div",H,[(i(!0),f(k,null,R(o.settingsItems,e=>(i(),h(b,{key:e.action,to:e.href,onClick:e.settingAction,target:e.external?"_blank":"",class:q([e.customCss,"cursor-pointer flex items-center justify-between px-5 py-2 rounded-xl text-base bg-lightbase border-[1px] border-base"])},{default:y(()=>[n("div",J,[n("div",K,[e.logoType==="icon"?(i(),h(u,{key:0,icon:e.logo},null,8,["icon"])):(i(),f("img",{key:1,src:e.logo,alt:"qr",class:"w-10 rounded-xl"},null,8,O))]),n("div",X,[n("span",Z,v(e.action),1),n("span",oo,v(e.value),1)])]),l(u,{icon:"arrow-right"})]),_:2},1032,["to","onClick","target","class"]))),128))]),l(C,{open:o.confirmDeletionModal,title:"Confirm account deactivation",desc:"Are you sure you want to deactivate your account? This will remove access to all your data associated with this platform.",loading:o.loading,onChangeModalStatus:t[0]||(t[0]=e=>o.confirmDeletionModal=e),onConfirmModalAction:o.deleteUser},null,8,["open","loading","onConfirmModalAction"])],64)}const fo=A(W,[["render",eo]]);export{fo as default};
